{% extends 'base.html.twig' %}

{% block title %}Calendari{% endblock %}

{% block stylesheets %}
<style>
    #calendari{
        width: 50%;
    }

    .contenidor{
        
    }

</style>

{% endblock %}

{% block body %}

    <div class="contenidor" style="display: flex;justify-content: space-evenly">
        <div id="calendari" class="bg-white"></div>
        <div class="card" style="width: 18rem;">
            <img src="..." class="card-img-top" alt="...">
            <div class="card-body">
                <h5 class="card-title" id="titol"></h5>
                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
            </div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item" id="fecha_inicio"></li>
                <li class="list-group-item" id="fecha_fin"></li>
            </ul>
            <ul class="list-group list-group-flush">
                <li class="list-group-item" id="cliente_nombre"></li>
                <li class="list-group-item" id="cliente_email"></li>
                <li class="list-group-item" id="cliente_telefono"></li>
            </ul>
        </div>
    </div>

{% endblock %}

{% block javascripts %}

<script>
    window.onload = () => {
       let calendariElt = document.querySelector("#calendari")
        let calendari = new FullCalendar.Calendar(calendariElt,{
            initialView: 'dayGridMonth',
            themeSystem: 'bootstrap',
            locale:'esp',
            timeZone: 'Europe/Barcelona',
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,list'
            },
            buttonText: {
                prev: '<',
                next: '>',
                today:'Hoy',
                month:'Mes',
                week:'Semana',
                list:'Lista',
            },
            eventClick:function (info){
                $('#titol').html(info.event.title);
                $('#tamano').html(info.event._def.extendedProps.talla);
                $('#fecha_inicio').html(info.event.start);
                $('#fecha_fin').html(info.event.end);
                $('#cliente_nombre').html(info.event._def.extendedProps.cliente_apellido);
                $('#cliente_email').html(info.event._def.extendedProps.cliente_email);
                $('#cliente_telefono').html(info.event._def.extendedProps.cliente_telefono);

                console.log(info.event._def.extendedProps.imatge);
                console.log(info.event._def.extendedProps.cliente);

            },

            events: {{ data|raw  }}

        })
        calendari.render()
    }
</script>

{% endblock %}